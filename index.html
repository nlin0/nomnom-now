<!DOCTYPE html>
<html lang="en">

<head>
  <title>NomNomNow</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://d3js.org/topojson.v3.min.js"></script>
  <!-- add leaflet  -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script> 
  <style>
    /* ADD CSS HERE LATER */
  </style>
</head>

<body>

  <svg id="choropleth" width="690" height="470" style="margin:20px"></svg>
  <ul id="lis"></ul>

  <script>
    // putting this here for easier customization
    const map_fill = "#69b3a2"
    const map_select = "#ffcc00"

    const map_svg = d3.select("#choropleth");
    const width = map_svg.attr("width");
    const height = map_svg.attr("height");
    const margin = { top: 20, right: 10, bottom: 20, left: 10 };
    const map_width = width - margin.left - margin.right;
    const map_height = height - margin.top - margin.bottom;

    const load_map = async function () {
      const bostonMap = await d3.json("data/boston.geojson");
      const projection = d3.geoMercator().fitSize([map_width, map_height], bostonMap);
      const path = d3.geoPath().projection(projection);


      console.log(bostonMap.features);

      map_svg.append("g")
        .selectAll("path")
        .data(bostonMap.features)
        .enter().append("path")
        .attr("d", d => path(d))
        .attr("fill", map_fill)
        .on("mouseover", function (event, d) {
          d3.select(this).attr("fill", map_select);
        })
        .on("mouseout", function (event, d) {
          d3.select(this).attr("fill", map_fill);
        });

      d3.select("#lis")
        .selectAll("li")
        .data(bostonMap.features)
        .enter()
        .append("li")
        .text(d => d.properties.name);
    };

    load_map();


  </script>
</body>

</html>